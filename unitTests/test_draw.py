#add parent directory to import path
import os.path, sys
sys.path.append(os.path.join(os.path.dirname(os.path.realpath(__file__)), os.pardir))

#Internal Dependencies
import draw
from dataTypes import *

def test_makeCenterLines():
    plane = PlaneInfo(angle=3.141592653589793, pitch=5.0, noOfWires=200, originTranslation=1000.0, sin=1.2246467991473532e-16, cos=-1.0, gradient='INF')
    wire = (100,110)

    ans =[Line(point0=Point(x=497.5, y=6.15385016571545e-14), point1=Point(x=497.5, y=1.0000000000000615)), Line(point0=Point(x=492.5, y=6.215082505672818e-14), point1=Point(x=492.5, y=1.0000000000000622)), Line(point0=Point(x=487.5, y=6.276314845630185e-14), point1=Point(x=487.5, y=1.0000000000000628)), Line(point0=Point(x=482.5, y=6.337547185587553e-14), point1=Point(x=482.5, y=1.0000000000000633)), Line(point0=Point(x=477.5, y=6.39877952554492e-14), point1=Point(x=477.5, y=1.000000000000064)), Line(point0=Point(x=472.5, y=6.460011865502288e-14), point1=Point(x=472.5, y=1.0000000000000646)), Line(point0=Point(x=467.5, y=6.521244205459655e-14), point1=Point(x=467.5, y=1.0000000000000653)), Line(point0=Point(x=462.5, y=6.582476545417023e-14), point1=Point(x=462.5, y=1.0000000000000657)), Line(point0=Point(x=457.5, y=6.64370888537439e-14), point1=Point(x=457.5, y=1.0000000000000664)), Line(point0=Point(x=452.5, y=6.704941225331758e-14), point1=Point(x=452.5, y=1.000000000000067)), Line(point0=Point(x=447.5, y=6.766173565289127e-14), point1=Point(x=447.5, y=1.0000000000000677))]

    assert draw.makeCenterLines(plane, wire) == ans

def test_makeEventLines():
    planes = [PlaneInfo(angle=1.0471975511965976, pitch=5.0, noOfWires=273, originTranslation=0, sin=0.8660254037844386, cos=0.5000000000000001, gradient=-0.5773502691896263), PlaneInfo(angle=2.0943951023931953, pitch=5.0, noOfWires=273, originTranslation=1000.0, sin=0.8660254037844387, cos=-0.4999999999999998, gradient=0.5773502691896255), PlaneInfo(angle=3.141592653589793, pitch=5.0, noOfWires=200, originTranslation=1000.0, sin=1.2246467991473532e-16, cos=-1.0, gradient='INF')]
    event = [[(41, 43),(100, 100)],[(81, 83),(100, 100)],[(83, 85), (100, 100)]]

    ansT= [(Line(point0=Point(x=103.75000000000003, y=179.70027128527101), point1=Point(x=104.75000000000003, y=179.1229210160814)), True), (Line(point0=Point(x=106.25000000000003, y=184.0303983041932), point1=Point(x=107.25000000000003, y=183.45304803500358)), True), (Line(point0=Point(x=108.75000000000003, y=188.36052532311538), point1=Point(x=109.75000000000003, y=187.78317505392576)), True), (Line(point0=Point(x=251.25000000000006, y=435.1777654016804), point1=Point(x=252.25000000000006, y=434.60041513249075)), True), (Line(point0=Point(x=796.2500000000001, y=352.90535204215877), point1=Point(x=797.2500000000001, y=353.4827023113484)), True), (Line(point0=Point(x=793.7500000000001, y=357.235479061081), point1=Point(x=794.7500000000001, y=357.81282933027063)), True), (Line(point0=Point(x=791.2500000000001, y=361.56560608000314), point1=Point(x=792.2500000000001, y=362.1429563491928)), True), (Line(point0=Point(x=748.7500000000001, y=435.17776540168046), point1=Point(x=749.7500000000001, y=435.7551156708701)), True), (Line(point0=Point(x=582.5, y=5.1129003864401994e-14), point1=Point(x=582.5, y=1.000000000000051)), True), (Line(point0=Point(x=577.5, y=5.1741327263975676e-14), point1=Point(x=577.5, y=1.0000000000000517)), True), (Line(point0=Point(x=572.5, y=5.235365066354935e-14), point1=Point(x=572.5, y=1.0000000000000524)), True), (Line(point0=Point(x=497.5, y=6.15385016571545e-14), point1=Point(x=497.5, y=1.0000000000000615)), True)]

    ansF = [(Line(point0=Point(x=102.50000000000003, y=177.5352077758099), point1=Point(x=103.50000000000003, y=176.9578575066203)), False), (Line(point0=Point(x=110.00000000000003, y=190.5255888325765), point1=Point(x=111.00000000000003, y=189.94823856338687)), False), (Line(point0=Point(x=250.00000000000006, y=433.0127018922193), point1=Point(x=251.00000000000006, y=432.43535162302965)), False), (Line(point0=Point(x=252.50000000000006, y=437.3428289111415), point1=Point(x=253.50000000000006, y=436.76547864195186)), False), (Line(point0=Point(x=797.5000000000001, y=350.74028853269766), point1=Point(x=798.5000000000001, y=351.3176388018873)), False), (Line(point0=Point(x=790.0000000000001, y=363.73066958946424), point1=Point(x=791.0000000000001, y=364.3080198586539)), False), (Line(point0=Point(x=750.0000000000001, y=433.01270189221935), point1=Point(x=751.0000000000001, y=433.590052161409)), False), (Line(point0=Point(x=747.5000000000001, y=437.34282891114157), point1=Point(x=748.5000000000001, y=437.9201791803312)), False), (Line(point0=Point(x=585.0, y=5.0822842164615156e-14), point1=Point(x=585.0, y=1.0000000000000508)), False), (Line(point0=Point(x=570.0, y=5.265981236333619e-14), point1=Point(x=570.0, y=1.0000000000000526)), False), (Line(point0=Point(x=500.0, y=6.123233995736766e-14), point1=Point(x=500.0, y=1.0000000000000613)), False), (Line(point0=Point(x=495.0, y=6.184466335694134e-14), point1=Point(x=495.0, y=1.000000000000062)), False)]

    ansB = [(Line(point0=Point(x=103.75000000000003, y=179.70027128527101), point1=Point(x=104.75000000000003, y=179.1229210160814)), True), (Line(point0=Point(x=106.25000000000003, y=184.0303983041932), point1=Point(x=107.25000000000003, y=183.45304803500358)), True), (Line(point0=Point(x=108.75000000000003, y=188.36052532311538), point1=Point(x=109.75000000000003, y=187.78317505392576)), True), (Line(point0=Point(x=102.50000000000003, y=177.5352077758099), point1=Point(x=103.50000000000003, y=176.9578575066203)), False), (Line(point0=Point(x=110.00000000000003, y=190.5255888325765), point1=Point(x=111.00000000000003, y=189.94823856338687)), False), (Line(point0=Point(x=251.25000000000006, y=435.1777654016804), point1=Point(x=252.25000000000006, y=434.60041513249075)), True), (Line(point0=Point(x=250.00000000000006, y=433.0127018922193), point1=Point(x=251.00000000000006, y=432.43535162302965)), False), (Line(point0=Point(x=252.50000000000006, y=437.3428289111415), point1=Point(x=253.50000000000006, y=436.76547864195186)), False), (Line(point0=Point(x=796.2500000000001, y=352.90535204215877), point1=Point(x=797.2500000000001, y=353.4827023113484)), True), (Line(point0=Point(x=793.7500000000001, y=357.235479061081), point1=Point(x=794.7500000000001, y=357.81282933027063)), True), (Line(point0=Point(x=791.2500000000001, y=361.56560608000314), point1=Point(x=792.2500000000001, y=362.1429563491928)), True), (Line(point0=Point(x=797.5000000000001, y=350.74028853269766), point1=Point(x=798.5000000000001, y=351.3176388018873)), False), (Line(point0=Point(x=790.0000000000001, y=363.73066958946424), point1=Point(x=791.0000000000001, y=364.3080198586539)), False), (Line(point0=Point(x=748.7500000000001, y=435.17776540168046), point1=Point(x=749.7500000000001, y=435.7551156708701)), True), (Line(point0=Point(x=750.0000000000001, y=433.01270189221935), point1=Point(x=751.0000000000001, y=433.590052161409)), False), (Line(point0=Point(x=747.5000000000001, y=437.34282891114157), point1=Point(x=748.5000000000001, y=437.9201791803312)), False), (Line(point0=Point(x=582.5, y=5.1129003864401994e-14), point1=Point(x=582.5, y=1.000000000000051)), True), (Line(point0=Point(x=577.5, y=5.1741327263975676e-14), point1=Point(x=577.5, y=1.0000000000000517)), True), (Line(point0=Point(x=572.5, y=5.235365066354935e-14), point1=Point(x=572.5, y=1.0000000000000524)), True), (Line(point0=Point(x=585.0, y=5.0822842164615156e-14), point1=Point(x=585.0, y=1.0000000000000508)), False), (Line(point0=Point(x=570.0, y=5.265981236333619e-14), point1=Point(x=570.0, y=1.0000000000000526)), False), (Line(point0=Point(x=497.5, y=6.15385016571545e-14), point1=Point(x=497.5, y=1.0000000000000615)), True), (Line(point0=Point(x=500.0, y=6.123233995736766e-14), point1=Point(x=500.0, y=1.0000000000000613)), False), (Line(point0=Point(x=495.0, y=6.184466335694134e-14), point1=Point(x=495.0, y=1.000000000000062)), False)]

    assert draw.makeEventLines(planes, event, True) == ansT
    assert draw.makeEventLines(planes, event, False) == ansF
    assert draw.makeEventLines(planes, event, "both") == ansB
